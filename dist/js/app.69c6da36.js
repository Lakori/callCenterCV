(function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],p=0,d=[];p<c.length;p++)s=c[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==r[i]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0c66":function(e,t,a){"use strict";var n=a("25ff"),r=a.n(n);r.a},"25ff":function(e,t,a){},"569e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("99af"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s={components:{}},c=s,i=(a("5c0b"),a("2877")),u=Object(i["a"])(c,r,o,!1,null,null,null),l=u.exports,p=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.logged?a("div",{staticClass:"v-main-wrapper"},[a("b-button",{staticClass:"logout",attrs:{variant:"outline-primary"},on:{click:e.logout}},[e._v("Вихід")]),a("div",{staticClass:"v-main-wrapper__block"},[a("router-view")],1)],1):e._e()},f=[],m=(a("96cf"),a("1da1")),v={name:"v-main-wrapper",components:{},data:function(){return{logged:!1}},beforeCreate:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.logged=!1,t.next=4,e.$axios.get("/account");case 4:return a=t.sent,n=encodeURIComponent(JSON.stringify({name:"call centre"})),t.next=8,e.$axios.get("/roles?conditions=".concat(n));case 8:r=t.sent,a.data.userData?r.data.page.data[0].roleId===a.data.userData.roleId?e.logged=!0:e.$router.push({path:"/login"}):(e.$router.push({path:"/login"}),e.logged=!1),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),e.$router.push({path:"/login"}),e.logged=!1;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},methods:{logout:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/account/signout");case 3:e.$router.push({path:"/login"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},h=v,g=Object(i["a"])(h,d,f,!1,null,null,null),b=g.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginForm"},[a("div",[a("b-form",[a("h1",[e._v("Увійти в систему")]),e.value?e._e():a("b-form-group",{attrs:{label:"Телефон:","label-for":"phone"}},[a("b-form-input",{staticClass:"main-size",attrs:{id:"phone",type:"text",required:"",placeholder:"Введіть телефон"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("b-form-group",{attrs:{label:"Пароль:","label-for":"password"}},[a("b-form-input",{staticClass:"main-size",attrs:{id:"password",type:"password",required:"",placeholder:"Введіть пароль"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("b-button",{staticClass:"main-size",attrs:{variant:"primary"},on:{click:e.checkPassword}},[e._v("Увійти")]),e.wrong?a("div",{staticStyle:{color:"red"}},[e._v("Невірний номер")]):e._e(),e.wrongPass?a("div",{staticStyle:{color:"red"}},[e._v("Невірний код або пароль")]):e._e()],1)],1)])},x=[],_=(a("b0c0"),{data:function(){return{phone:"",password:"",smsCode:"",wrong:!1,value:"",wrongPass:!1}},methods:{reset:function(){this.name="",this.password=""},checkPassword:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.preventDefault(),t.wrong=!1,a.next=5,t.$axios.post("/account/identification",{phone:t.phone});case 5:return a.next=7,t.$axios.post("/account/authentication",{password:t.password,smscode:t.smsCode});case 7:n=a.sent,n.data.authenticated?(t.reset(),t.$router.push({path:"/"})):t.wrongPass=!0,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},toRegistrationPage:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.preventDefault(),t.reset(),t.$router.push({path:"/registration"});case 3:case"end":return a.stop()}}),a)})))()}}}),y=_,k=(a("ee9e"),Object(i["a"])(y,w,x,!1,null,null,null)),R=k.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.appeals.length?e._e():a("div",[a("h1",[e._v("Пошук звернень")]),a("br"),a("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("h3",[e._v("Введить дані для пошуку ")]),a("br"),a("label",[e._v("Введіть фамілію політика для пошука:")]),a("div",{staticClass:"center__container"},[a("b-form-input",{staticClass:"item",attrs:{list:"my-list-id"},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("datalist",{attrs:{id:"my-list-id"}},e._l(e.politicians,(function(t){return a("option",{key:t.id},[e._v(e._s(t.fullName.surname)+" "+e._s(t.fullName.name))])})),0)],1),e.noPolitician?a("div",{staticClass:"noPolitician"},[e._v("Політика не знайдено")]):e._e(),a("br"),a("div",{staticClass:"date"},[a("div",{staticClass:"item"},[a("div",[a("label",[e._v("Оберіть дати для пошука:")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Дата початок пошука",id:"example-datepicker1"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}})],1),a("br"),a("div",[a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Дата кінець пошука",id:"example-datepicker2"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1),e.noDates?a("div",{staticStyle:{color:"red"}},[e._v("За ці дати не знайдено звернень")]):e._e()]),a("div",{staticClass:"item"},[e.fromDate||e.toDate?a("b-button",{attrs:{variant:"success"},on:{click:e.newDate}},[e._v("Видалити дату")]):e._e()],1)]),a("b-button",{attrs:{variant:"outline-primary",type:"submit"}},[e._v("Показати звернення")])],1),a("br"),e.noMatches?a("h5",{staticStyle:{color:"red"}},[e._v("Не знайдено жодного звернення")]):e._e()]),a("br"),e.appeals.length?a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"appeals__back",on:{click:e.backToSearch}},[a("b-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:"backspace-fill"}}),e._v("Назад")],1),a("b-button",{staticClass:"downloadAppeals",attrs:{variant:"primary"},on:{click:e.downloadXlsx}},[e._v("Завантажити ВСІ звернення")]),a("h5",[e._v("Всього звернень: "+e._s(this.rows))]),a("br"),a("b-pagination",{staticStyle:{"justify-content":"center","margin-bottom":"20px"},attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),a("appeal-card",{attrs:{partiesArr:e.parties,politicianArr:e.politicians,currentPage:e.newPage,appeals:e.appeals}})],1):e._e()])},D=[],O=(a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appeals"},[e.loader?a("div",{staticClass:"appeal__load"},[a("b-icon",{attrs:{icon:"three-dots",animation:"cylon","font-scale":"4"}})],1):e._l(e.mainAppeals,(function(t,n){return a("b-card-group",{key:t.id,staticClass:"appeals-card",attrs:{deck:""}},[a("b-card",{attrs:{header:t.topic,"header-tag":"header",footer:t.status,"footer-tag":"footer"}},[a("b-card-text",[a("h5",[e._v(e._s(t.voterSurname)+" "+e._s(t.voterName)+" "+e._s(t.voterPhone))]),a("br"),a("h6",[a("b",[e._v("Адресат політик:")]),e._v(" "+e._s(t.politicianName||"не знайдено"))]),a("h6",[a("b",[e._v("Адресат партія:")]),e._v(e._s(t.party||"не знайдено"))]),a("b",[e._v("Текст звернення :")]),a("br"),e.check!==n?a("div",[e._v(" "+e._s(t.contentPart)+" "),160==t.contentPart.length?a("b",{staticClass:"more",on:{click:function(t){e.check=n}}},[e._v("...")]):e._e()]):a("div",[e._v(" "+e._s(t.content))]),t.image?a("div",{staticClass:"img__container"},[a("img",{attrs:{src:t.image}}),a("b-button",{staticClass:"img__download",attrs:{variant:"primary"},on:{click:function(a){return a.preventDefault(),e.downloadImg(t.appealId)}}},[e._v("Завантажити зображення")])],1):e._e()])],1)],1)}))],2)}),I=[],j=(a("4160"),a("a15b"),a("13d5"),a("a434"),a("a9e3"),a("159b"),{data:function(){return{mainAppeals:[],loader:!1,politicianReduced:[],partiesReduced:[],fullInfo:!1,check:null,bigImg:!1}},props:{appeals:{type:Array,default:function(){}},politicianArr:{type:Array,default:function(){}},currentPage:{type:Number,default:function(){}},partiesArr:{type:Array,default:function(){}}},watch:{currentPage:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllInfo();case 2:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.politicianReduced=e.politicianArr.reduce((function(e,t){return e[t.deputyId]="".concat(t.fullName.surname," ").concat(t.fullName.name),e}),{}),t.next=3,e.getAllInfo();case 3:case"end":return t.stop()}}),t)})))()},methods:{downloadImg:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$axios.get("/appeals/".concat(e));case 3:n=a.sent,r=document.createElement("a"),r.target="_blank",r.download="img.jpg",r.href="".concat(n.data.image),r.click(),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},getAllInfo:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.mainAppeals=[],e.loader=!0,a=regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.findVoter(e.appeals[a].voterId);case 2:n=t.sent,e.appeals[a].politicalPartyId&&e.partiesArr.forEach((function(t){e.appeals[a].politicalPartyId===t.politicalPartyId&&(e.appeals[a].party=t.name)})),e.appeals[a].deputyId&&e.politicianArr.forEach((function(t){e.appeals[a].deputyId===t.deputyId&&(e.appeals[a].politicianName="".concat(t.fullName.surname," ").concat(t.fullName.name))})),e.appeals[a].voterSurname=n.surname,e.appeals[a].voterName=n.name,e.appeals[a].voterPhone=n.phone,e.appeals[a].contentPart=e.appeals[a].content.split("").splice(0,160).join(""),e.mainAppeals.push(e.appeals[a]);case 10:case"end":return t.stop()}}),t)})),n=0;case 5:if(!(n<=e.appeals.length-1)){t.next=10;break}return t.delegateYield(a(n),"t0",7);case 7:n++,t.next=5;break;case 10:e.loader=!1,t.next=16;break;case 13:t.prev=13,t.t1=t["catch"](0),console.log(t.t1);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},findVoter:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$axios.get("/voters/".concat(e));case 3:return n=a.sent,a.abrupt("return",{surname:n.data.fullName.surname||"без фамилии",name:n.data.fullName.name||"",phone:n.data.phone});case 7:throw a.prev=7,a.t0=a["catch"](0),console.log("nne"),new Error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}}),C=j,$=(a("0c66"),Object(i["a"])(C,O,I,!1,null,"d4a3c446",null)),A=$.exports,S={data:function(){return{surname:"",politicians:[],parties:[],noPolitician:!1,name:"",fromDate:null,toDate:null,appeals:[],noDates:!1,deputyId:null,currentPage:1,perPage:10,rows:null,newPage:null,noMatches:!1}},components:{appealCard:A},watch:{currentPage:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.searchByDate(e.deputyId);case 2:a=t.sent,e.appeals=a,e.newPage=e.currentPage;case 5:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllPolitician();case 2:return t.next=4,e.getAllParties();case 4:case"end":return t.stop()}}),t)})))()},methods:{getAllPolitician:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.parties=[],t.next=4,e.$axios.get("/deputies");case 4:a=t.sent,e.politicians=a.data.page.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getAllParties:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.parties=[],t.next=4,e.$axios.get("/political-parties");case 4:a=t.sent,e.parties=a.data.page.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},search:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.appeals=[],e.preventDefault(),!t.surname){a.next=9;break}return a.next=6,t.searchBySurname();case 6:t.deputyId=a.sent,a.next=10;break;case 9:t.deputyId=null;case 10:return a.next=12,t.searchByDate(t.deputyId);case 12:n=a.sent,t.appeals=n,t.newPage=t.currentPage,a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](0),console.log(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})))()},searchByDate:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var n,r,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n={},t.noMatches=!1,r=encodeURIComponent(JSON.stringify({page:{index:t.currentPage-1,size:t.perPage}})),t.fromDate&&t.toDate&&(n.createdAt={$gte:t.fromDate,$lte:t.toDate}),e&&(n.deputyId=e),o=encodeURIComponent(JSON.stringify(n)),a.next=9,t.$axios.get("/appeals?conditions=".concat(o,"&options=").concat(r));case 9:return s=a.sent,t.rows=s.data.totalItems,t.noMatches=!(s.data.totalItems>0),a.abrupt("return",s.data.page.data);case 15:a.prev=15,a.t0=a["catch"](0),console.log(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,15]])})))()},searchBySurname:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.surname){t.next=8;break}return a=e.surname.split(" "),n=encodeURIComponent(JSON.stringify({fullName:{surname:a[0],name:a[1]}})),t.next=6,e.$axios.get("deputies?conditions=".concat(n));case 6:return r=t.sent,t.abrupt("return",r.data.page.data[0].deputyId);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},downloadXlsx:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},e.fromDate&&e.toDate&&(a.createdAt={$gte:e.fromDate,$lte:e.toDate}),e.deputyId&&"політика не знайдено"!==e.deputyId&&(a.deputyId=e.deputyId),n=encodeURIComponent(JSON.stringify(a)),t.next=7,e.$axios.get("/appeals-xlsx?conditions=".concat(n),{responseType:"blob"});case 7:r=t.sent,o=window.URL.createObjectURL(new Blob([r.data])),s=document.createElement("a"),s.href=o,s.setAttribute("download","file.xlsx"),document.body.appendChild(s),s.click(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},backToSearch:function(){this.appeals=[],this.surname="",this.politician=[],this.noPolitician=!1,this.name="",this.fromDate=null,this.toDate=null,this.appeals=[],this.noDates=!1},newDate:function(e){e.preventDefault(),this.fromDate=null,this.toDate=null}}},N=S,E=(a("5977"),Object(i["a"])(N,P,D,!1,null,"31915a30",null)),U=E.exports;n["default"].use(p["a"]);var M=[{path:"/",component:b,children:[{path:"/",name:"callCenter",component:U}]},{path:"/login",name:"login",component:R}],J=new p["a"]({routes:M}),B=J,T=a("2f62");n["default"].use(T["a"]);var z=new T["a"].Store({state:{products:[],cart:[]},getters:{},mutations:{},actions:{},modules:{}}),L=(a("569e"),a("d1e78"),a("5f5b")),q=a("b1e0"),V=(a("f9e3"),a("2dd8"),a("bc3a")),X=a.n(V),F={version:"/1.0.0",isRelativeUrl:!1,url:"http://161.35.95.136:8877",subDomain:"/api"},Y=function(){return F.subDomain+F.version},G=a("5886"),H=(a("4413"),a("b6d0"));n["default"].use(H["a"]),n["default"].use(G["a"]),n["default"].prototype.$axios=X.a.create({baseURL:"".concat(window.location.origin).concat(Y())}),n["default"].use(L["a"]),n["default"].use(q["a"]),n["default"].config.productionTip=!1,new n["default"]({router:B,store:z,render:function(e){return e(l)}}).$mount("#app")},5977:function(e,t,a){"use strict";var n=a("755b"),r=a.n(n);r.a},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"755b":function(e,t,a){},"9c0c":function(e,t,a){},b3db:function(e,t,a){},ee9e:function(e,t,a){"use strict";var n=a("b3db"),r=a.n(n);r.a}});
//# sourceMappingURL=app.69c6da36.js.map